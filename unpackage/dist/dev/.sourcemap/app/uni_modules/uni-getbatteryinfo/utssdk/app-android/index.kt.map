{"version":3,"sources":["uni_modules/uni-getbatteryinfo/utssdk/app-android/index.uts"],"sourcesContent":["import Context from \"android.content.Context\";\nimport BatteryManager from \"android.os.BatteryManager\";\nimport { UTSAndroid } from \"io.dcloud.uts\";\n\n\ntype GetBatteryInfoOptions = {\n    success?: (res: UTSJSONObject) => void\n    fail?: (res: UTSJSONObject) => void\n    complete?: (res: UTSJSONObject) => void\n}\n\nexport default function getBatteryInfo(options: GetBatteryInfoOptions) {\n    const context = UTSAndroid.getAppContext();\n    if (context != null) {\n        const manager = context.getSystemService(\n            Context.BATTERY_SERVICE\n        ) as BatteryManager;\n        const level = manager.getIntProperty(\n            BatteryManager.BATTERY_PROPERTY_CAPACITY\n        );\n        const res = {\n\t\t\terrCode: 0, \n\t\t\terrSubject: \"uni-getBatteryInfo\",\n            errMsg: 'getBatteryInfo:ok',\n            level,\n            isCharging: manager.isCharging()\n        }\n        options.success?.(res)\n        options.complete?.(res)\n    } else {\n        const res = {\n\t\t\terrSubject: \"uni-getBatteryInfo\",\n\t\t\terrCode: 1001, \n            errMsg: 'getBatteryInfo:fail getAppContext is null'\n        }\n        options.fail?.(res)\n        options.complete?.(res)\n    }\n}\n"],"names":[],"mappings":";;;;;;;AAAA,OAAoB,uBAAyB,CAAC;AAC9C,OAA2B,yBAA2B,CAAC;AACvD;AAG6B,WAAxB;IACD,SAAA,SAAQ,oBAA8B;IACtC,SAAA,MAAK,oBAA8B;IACnC,SAAA,UAAS,oBAA8B;AAC3C;AAEe,IAAS,eAAe,SAAS,qBAAqB,EAAE;IACnE,IAAM,UAAU,WAAW,aAAa;IACxC,IAAI,WAAW,IAAI,EAAE;QACjB,IAAM,UAAU,QAAQ,gBAAgB,CACpC,QAAQ,eAAe,KACtB;QACL,IAAM,QAAQ,QAAQ,cAAc,CAChC,eAAe,yBAAyB;QAE5C,IAAM,MAAM;YACjB,IAAA,UAAS,CAAC;YACV,IAAA,aAAY;YACH,IAAA,SAAQ;YACR,IAAA,QAAA;YACA,IAAA,aAAY,QAAQ,UAAU;SACjC;QACD,QAAQ,OAAO,SAAG;QAClB,QAAQ,QAAQ,SAAG;IACvB,OAAO;QACH,IAAM,OAAM;YACjB,IAAA,aAAY;YACZ,IAAA,UAAS,IAAI;YACJ,IAAA,SAAQ;SACX;QACD,QAAQ,IAAI,SAAG;QACf,QAAQ,QAAQ,SAAG;IACvB;AACJ"}